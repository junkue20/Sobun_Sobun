<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.mapper.gr.GrCustomerMapper">

   

    <select id="selectCustomerOne1" parameterType="string" resultType="com.example.dto.Customer">
        SELECT c.* FROM customer c WHERE c.id=#{id}
    </select>

    <!-- 전체 공구 참여 횟수 카운트 -->
    <select id="countPurchase" parameterType="string" resultType="int">
        SELECT count(*) FROM (SELECT *, ROW_NUMBER() over (PARTITION BY purchaseno ORDER BY no DESC) recent FROM purchasestatus p WHERE MEMID=#{id}) WHERE recent=1 AND state=1 AND cancel=0
    </select>



</mapper>